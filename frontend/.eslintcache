[{"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/index.js":"1","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/App.js":"2","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/pages/Home/Home.js":"3","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Base.js":"4","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Header/Header.js":"5","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Footer/Footer.js":"6","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/auth/index.js":"7","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/backend.js":"8","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/Signin.js":"9","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/helper/helper.js":"10","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/Signup.js":"11","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/auth/PrivateRoutes.js":"12","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/Profile/Profile.js":"13","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Left/Left.js":"14","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Right/Right.js":"15","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/AddBook/AddBook.js":"16","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/auth/AdminRoutes.js":"17","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/helper.js":"18","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/Success.js":"19","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/UpdateBook/UpdateBook.js":"20","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/Dashboard/Dashboard.js":"21","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Card.js":"22"},{"size":412,"mtime":1608659131627,"results":"23","hashOfConfig":"24"},{"size":1237,"mtime":1608717429591,"results":"25","hashOfConfig":"24"},{"size":2616,"mtime":1608751625123,"results":"26","hashOfConfig":"24"},{"size":533,"mtime":1608721875493,"results":"27","hashOfConfig":"24"},{"size":1331,"mtime":1608659408211,"results":"28","hashOfConfig":"24"},{"size":0,"mtime":1608658764112,"results":"29","hashOfConfig":"24"},{"size":1498,"mtime":1608658488295,"results":"30","hashOfConfig":"24"},{"size":47,"mtime":1608658441868,"results":"31","hashOfConfig":"24"},{"size":3479,"mtime":1608660276481,"results":"32","hashOfConfig":"24"},{"size":2485,"mtime":1608707866533,"results":"33","hashOfConfig":"24"},{"size":3051,"mtime":1608660374905,"results":"34","hashOfConfig":"24"},{"size":571,"mtime":1608658561137,"results":"35","hashOfConfig":"24"},{"size":3465,"mtime":1608751659120,"results":"36","hashOfConfig":"24"},{"size":1664,"mtime":1608703504932,"results":"37","hashOfConfig":"24"},{"size":1629,"mtime":1608703509892,"results":"38","hashOfConfig":"24"},{"size":5357,"mtime":1608712376890,"results":"39","hashOfConfig":"24"},{"size":604,"mtime":1608709592143,"results":"40","hashOfConfig":"24"},{"size":2459,"mtime":1608711068373,"results":"41","hashOfConfig":"24"},{"size":485,"mtime":1608711884709,"results":"42","hashOfConfig":"24"},{"size":5776,"mtime":1608716487920,"results":"43","hashOfConfig":"24"},{"size":1209,"mtime":1608724332048,"results":"44","hashOfConfig":"24"},{"size":1446,"mtime":1608724028867,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"foas89",{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"48"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"48"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"48"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"48"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"48"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"48"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"48"},"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/index.js",[],["98","99"],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/App.js",["100"],"import React from 'react'\nimport './App.css'\nimport { BrowserRouter, Route, Link,Switch } from \"react-router-dom\";\n\nimport Home from './pages/Home/Home';\nimport Signin from './components/user/Signin';\nimport Signup from './components/user/Signup';\nimport PrivateRoute from './components/auth/PrivateRoutes';\nimport AdminRoute from './components/auth/AdminRoutes';\nimport Profile from './components/user/Profile/Profile';\nimport AddBook from './components/books/AddBook/AddBook';\nimport UpdateBook from './components/books/UpdateBook/UpdateBook';\nimport Dashboard from './components/books/Dashboard/Dashboard';\n\n\nfunction App() {\n  return (\n    <BrowserRouter>\n    <Switch>\n      <Route path=\"/\" exact component={Home} />\n      <Route path=\"/signup\" exact component={Signup} />\n      <Route path=\"/signin\" exact component={Signin} />\n\n      <PrivateRoute path=\"/profile\" exact component={Profile} />\n\n      <AdminRoute path=\"/admin/dashboard\"/>\n      <AdminRoute path=\"/admin/books/add\" exact component={AddBook} />\n      <AdminRoute path=\"/admin/books/edit/:bookId\" exact component={UpdateBook} />\n      <AdminRoute path=\"/admin/books/\" exact component={Dashboard} />\n\n      </Switch>  \n     </BrowserRouter>\n  );\n}\n\nexport default App;\n","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/pages/Home/Home.js",["101","102"],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Base.js",["103"],"import React from 'react'\nimport Header from './Header/Header'\nimport Footer from './Footer/Footer'\nimport Left from './Left/Left'\nimport Right from './Right/Right'\n\nconst Base = ({children}) => {\n    return (\n        <div style={{backgroundColor: \"#EAF0F1\"}}>\n          <Header />\n          <div style={{ display: \"flex\", flex: 1}}>\n          <Left/>\n          <div style={{ flex: 2 , minHeight: \"100vh\", borderRadius:\"20px\"}}>{children}</div>\n          <Right/>\n          </div>\n        </div>\n      );\n    }\n\nexport default Base;\n","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Header/Header.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Footer/Footer.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/auth/index.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/backend.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/Signin.js",["104"],"import React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport logo from '../../assets/logo.png'\nimport './helper/styles.css'\n\nimport { signin, authenticate, isAuthenticated } from \"./helper/helper\";\n\nconst Signin = () => {\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    loading: false,\n    didRedirect: false\n  });\n\n  const { email, password, error, loading, didRedirect } = values;\n  const { user } = isAuthenticated();\n\n  const handleChange = name => event => {\n    setValues({ ...values, error: false, [name]: event.target.value });\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values, error: false, loading: true });\n    signin({ email, password })\n      .then(data => {\n        if (data.error) {\n          setValues({ ...values, error: data.error, loading: false });\n          console.log(\"signin failed\")\n        } else {\n          authenticate(data, () => {\n            setValues({\n              ...values,\n              didRedirect: true\n            });\n            console.log(\"signin successful\")\n          });\n        }\n      })\n      .catch(err => console.log(err));\n  };\n\n  const performRedirect = () => {\n    if (didRedirect) {\n      if (user && user.role === 1) {\n        return <Redirect to=\"/admin/dashboard\" />;\n      } else {\n        return <Redirect to=\"/\" />;\n      }\n    }\n    if (isAuthenticated()) {\n      return <Redirect to=\"/\" />;\n    }\n  };\n\n  const loadingMessage = () => {\n    return (\n      loading && (\n        <div className=\"loading__message\">\n          <h1>Loading...</h1>\n        </div>\n      )\n    );\n  };\n\n  const errorMessage = () => {\n    return (\n      <div className=\"\">\n        <div className=\"\">\n          <div\n            className=\"message__error\"\n            style={{ display: error ? \"\" : \"none\" }}\n          >\n            {error}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n\n  const signInForm = () => {\n    return (\n        <div className=\"login\">\n        <Link to=\"/\">\n          <img\n            className=\"login__logo\"\n            src={logo}\n          />\n        </Link>\n  \n        <div className=\"login__container\">\n          <h1>Login</h1>\n  \n          <form>\n            <h5>E-mail</h5>\n            <input\n              type=\"text\"\n              value={email}\n              onChange={handleChange(\"email\")}\n            />\n  \n            <h5>Password</h5>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={handleChange(\"password\")}\n            />\n  \n            <button\n              type=\"submit\"\n              onClick={onSubmit}\n              className=\"login__signInButton\"\n            >\n              Sign In\n            </button>\n          </form>\n  \n          <p>\n          By continuing, you agree to Library's Conditions of Use and Privacy Notice.\n          </p>\n  \n          <p style={{\"text-align\":\"center\"}}>\n          Not a user? <Link to=\"/signup\">Register here</Link>\n          </p>\n          <Link to=\"/signup\">\n            <button className=\"login__registerButton\">\n              Create your Account here\n            </button>\n          </Link>\n        </div>\n      </div>);\n  };\n\n  return (\n    <div>\n      {loadingMessage()}\n      {errorMessage()}\n      {signInForm()}\n      {performRedirect()}\n      {/* <p className=\"text-white text-center\">{JSON.stringify(values)}</p> */}\n    </div>\n  );\n};\n\nexport default Signin;","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/helper/helper.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/Signup.js",["105"],"import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { signup } from \"./helper/helper\";\nimport \"./helper/styles.css\";\nimport logo from \"../../assets/logo.png\";\n\nconst Signup = () => {\n  const [values, setValues] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    success: \"\",\n  });\n\n\n  const { name, email, password,error, success } = values;\n\n  const handleChange = (name) => (event) => {\n    setValues({ ...values, error: false, [name]: event.target.value });\n  };\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    setValues({ ...values, error: false });\n    signup({ name, email, password })\n      .then((data) => {\n        if (data.error) {\n          setValues({ ...values, error: data.error, success: false });\n        } else {\n          setValues({\n            ...values,\n            name: \"\",\n            email: \"\",\n            password: \"\",\n            error: \"\",\n            success: true,\n          });\n        \n        }\n      })\n      .catch(() => {\n        console.log(\"error in signup\");\n      });\n  };\n\n  const signUpForm = () => {\n    return (\n      <div className=\"login\">\n        <Link to=\"/\">\n          <img className=\"login__logo\" src={logo} />\n        </Link> \n\n        <div className=\"login__container\">\n          <h1>Create Account</h1>\n         \n          <form>\n            <h5>Your name</h5>\n            <input type=\"text\" value={name} onChange={handleChange(\"name\")} />\n            \n            <h5>E-mail</h5>\n            <input type=\"text\" value={email} onChange={handleChange(\"email\")} />\n\n            <h5>Password</h5>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={handleChange(\"password\")}\n            />\n\n            <button\n              type=\"submit\"\n              onClick={onSubmit}\n              className=\"login__signInButton\"\n            >\n              Register\n            </button>\n          </form>\n\n          <p style={{ \"text-align\": \"center\" }}>\n            Already have an account? <Link to=\"/signin\">Sign in</Link>\n          </p>\n        </div>\n      </div>\n    );\n  };\n\n  const errorMessage = () => {\n    return (\n      <div className=\"\">\n        <div className=\"\">\n          <div\n            className=\"message__error\"\n            style={{ display: error ? \"\" : \"none\" }}\n          >\n            {error}\n          </div>\n        </div>\n      </div>\n    );\n  };\n  const successMessage = () => {\n    return (\n      <div className=\"\">\n        <div className=\"\">\n          <div\n            className=\"message__success\"\n            style={{ display: success ? \"\" : \"none\" }}\n          >\n            New account was created successfully. Please{\" \"}\n            <Link to=\"/signin\">Login here</Link>\n          </div>\n        </div>\n      </div>\n    );\n  };\n  return (\n    <div>\n      {successMessage()}\n      {errorMessage()}\n      {signUpForm()}\n      {/* <p className=\"text-light text-center\">{JSON.stringify(values)}</p> */}\n    </div>\n  );\n};\n\nexport default Signup;\n","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/auth/PrivateRoutes.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/user/Profile/Profile.js",["106","107","108","109","110","111","112"],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Left/Left.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Right/Right.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/AddBook/AddBook.js",["113"],"import React, { useState, useEffect } from \"react\";\nimport ReactCrop from \"react-image-crop\";\nimport \"react-image-crop/dist/ReactCrop.css\";\nimport {isAuthenticated} from '../../auth/index'\nimport {createBook} from '../helper'\nimport Base from '../../../shared/Base'\nimport \"./AddBook.css\";\nimport Success from '../Success'\n\nconst AddBook = () => {\n  const { token, user } = isAuthenticated();\n \n  const [values, setValues] = useState({\n    name: \"\",\n    imageUrl: \"\",\n    author: \"\",\n    publisher: \"\",\n    category:\"\",\n    error: \"\",\n    success: \"\",\n  });\n  const { name, imageUrl, author, publisher, category, error, success } = values;\n\n  const [src, selectedFile] = useState(null);\n\n  const handleFileChange = (e) => {\n    selectedFile(URL.createObjectURL(e.target.files[0]));\n  };\n  const [image, setImage] = useState(null);\n  const [result, setResult] = useState(null);\n\n  const [crop, setCrop] = useState({ aspect: 1 / 1 });\n\n  function getCroppedImg() {\n    const canvas = document.createElement(\"canvas\");\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n    const base64Image = canvas.toDataURL(\"image/jpeg\");\n    setResult(base64Image);\n    setValues({ ...values, imageUrl: base64Image });\n  }\n\n  const handleChange = (name) => (event) => {\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\n    setValues({ ...values, [name]: value });\n  };\n  const onSubmit = (event) => {\n    event.preventDefault();\n    setValues({ ...values, error: \"\" });\n    console.log(\"values\", values);\n    createBook(token, user._id, values).then((data) => {\n      console.log(\"data\", data);\n      if(data === undefined){\n        setValues({...values, error: \"Image size is large!!!! \"})\n      } \n      else if (data.err) {\n        setValues({ ...values, error: data.err });\n      }\n       else {\n        setValues({\n          ...values,\n          name: \"\",\n          imageUrl: \"\",\n          author: \"\",\n          publisher:\"\",\n          category:\"\",\n          error: \"\",\n          success: \"true\",\n        });\n      }\n    });\n  };\n\n  const errorMessage = () => (\n    <div className=\"message__error\" style={{ display: error ? \"\" : \"none\" }}>\n      <h4>{error}</h4>\n    </div>\n  );\n  const createBookPortion = () => {\n    return (\n      <Base>\n        <div className=\"addbook\">\n          {src ? (\n            <div className=\"addbook__image\">\n              {src && (\n                <div className=\"addbook__src\">\n                  <div className=\"addbook__pic\">\n                    <ReactCrop\n                      src={src}\n                      onImageLoaded={setImage}\n                      crop={crop}\n                      onChange={setCrop}\n                      className=\"addbook__photo\"\n                    />\n                  </div>\n                  <div className=\"addbook__crop\">\n                    <button\n                      className=\"addbook__crop__button\"\n                      onClick={getCroppedImg}\n                    >\n                      Crop Image\n                    </button>\n                  </div>\n                </div>\n              )}\n              {result && (\n                <div className=\"addbook__result\">\n                  <h1>Selected image</h1>\n                  <img src={imageUrl} alt=\"\" className=\"addbook__photo\" />\n                  {/* {console.log(imageUrl)} */}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"\">\n              <div className=\"\">\n                <div className=\"\">\n                  <input\n                    type=\"file\"\n                    accept=\"/image/*\"\n                    onChange={handleFileChange}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"addbook__title__section\">\n            <h2 className=\"addbook__title\">Name</h2>\n            <input\n              onChange={handleChange(\"name\")}\n              className=\"\"\n            />\n            <h2 className=\"addbook__title\">Author</h2>\n            <input\n              onChange={handleChange(\"author\")}\n              className=\"\"\n            />\n            <h2 className=\"addbook__title\">Publisher</h2>\n            <input\n              onChange={handleChange(\"publisher\")}\n              className=\"\"\n            />\n            <h2 className=\"addbook__title\">Category</h2>\n            <input\n              onChange={handleChange(\"category\")}\n              className=\"\"\n            />\n          </div>\n\n          \n         \n          {name && imageUrl && publisher && category && author && (\n            <div className=\"addbook__submit\">\n              <button className=\"addbook__submit__btn\" onClick={onSubmit}>\n                Publish\n              </button>\n            </div>\n          )}\n        </div>\n      </Base>\n    );\n  };\n\n  if (!success) {\n    return (\n      <div>\n        {errorMessage()}\n        {createBookPortion()}\n      </div>\n    );\n  } else {\n    return <Success />;\n  }\n};\nexport default AddBook;\n","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/auth/AdminRoutes.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/helper.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/Success.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/UpdateBook/UpdateBook.js",["114"],"import React, { useState, useEffect } from \"react\";\nimport ReactCrop from \"react-image-crop\";\nimport \"react-image-crop/dist/ReactCrop.css\";\nimport {isAuthenticated} from '../../auth/index'\nimport { getBook, updateBook} from '../helper'\nimport Base from '../../../shared/Base'\nimport \"./UpdateBook.css\";\nimport Success from '../Success'\n\nconst UpdateBook = ({match}) => {\n\n\n  useEffect(() => {\n    getBook(match.params.bookId)\n    .then(res => {\n      setValues({name: res.name, imageUrl: res.imageUrl, author: res.author, publisher: res.publisher, category: res.category})\n    })\n    .catch(err => console.log(err))\n  }, [])\n\n  const { token, user } = isAuthenticated();\n \n  const [values, setValues] = useState({\n    name: \"\",\n    imageUrl: \"\",\n    author: \"\",\n    publisher: \"\",\n    category:\"\",\n    error: \"\",\n    success: \"\",\n  });\n  const { name, imageUrl, author, publisher, category, error, success } = values;\n\n  const [src, selectedFile] = useState(null);\n\n  const handleFileChange = (e) => {\n    selectedFile(URL.createObjectURL(e.target.files[0]));\n  };\n  const [image, setImage] = useState(null);\n  const [result, setResult] = useState(null);\n\n  const [crop, setCrop] = useState({ aspect: 1 / 1 });\n\n  function getCroppedImg() {\n    const canvas = document.createElement(\"canvas\");\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n    const base64Image = canvas.toDataURL(\"image/jpeg\");\n    setResult(base64Image);\n    setValues({ ...values, imageUrl: base64Image });\n  }\n\n  const handleChange = (name) => (event) => {\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\n    setValues({ ...values, [name]: value });\n  };\n  const onSubmit = (event) => {\n    event.preventDefault();\n    setValues({ ...values, error: \"\" });\n    console.log(\"values\", values);\n    updateBook(token, match.params.bookId,user._id, values).then((data) => {\n      console.log(\"data\", data);\n      if(data === undefined){\n        setValues({...values, error: \"Image size is large!!!! \"})\n      } \n      else if (data.err) {\n        setValues({ ...values, error: data.err });\n      }\n       else {\n        setValues({\n          ...values,\n          name: \"\",\n          imageUrl: \"\",\n          author: \"\",\n          publisher:\"\",\n          category:\"\",\n          error: \"\",\n          success: \"true\",\n        });\n      }\n    });\n  };\n\n  const errorMessage = () => (\n    <div className=\"message__error\" style={{ display: error ? \"\" : \"none\" }}>\n      <h4>{error}</h4>\n    </div>\n  );\n  const createBookPortion = () => {\n    return (\n      <Base>\n        <div className=\"addbook\">\n          {src ? (\n            <div className=\"addbook__image\">\n              {src && (\n                <div className=\"addbook__src\">\n                  <div className=\"addbook__pic\">\n                    <ReactCrop\n                      src={src}\n                      onImageLoaded={setImage}\n                      crop={crop}\n                      onChange={setCrop}\n                      className=\"addbook__photo\"\n                    />\n                  </div>\n                  <div className=\"addbook__crop\">\n                    <button\n                      className=\"addbook__crop__button\"\n                      onClick={getCroppedImg}\n                    >\n                      Crop Image\n                    </button>\n                  </div>\n                </div>\n              )}\n              {result && (\n                <div className=\"addbook__result\">\n                  <h1>Selected image</h1>\n                  <img src={imageUrl} alt=\"\" className=\"addbook__photo\" />\n                  {/* {console.log(imageUrl)} */}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"\">\n              <div className=\"\">\n                <div className=\"\">\n                  <input\n                    type=\"file\"\n                    accept=\"/image/*\"\n                    onChange={handleFileChange}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"addbook__title__section\">\n            <h2 className=\"addbook__title\">Name</h2>\n            <input\n              value={name}\n              onChange={handleChange(\"name\")}\n              className=\"\"\n            />\n            <h2 className=\"addbook__title\">Author</h2>\n            <input\n              onChange={handleChange(\"author\")}\n              className=\"\"\n              value={author}\n            />\n            <h2 className=\"addbook__title\">Publisher</h2>\n            <input\n              onChange={handleChange(\"publisher\")}\n              className=\"\"\n              value={publisher}\n            />\n            <h2 className=\"addbook__title\">Category</h2>\n            <input\n              onChange={handleChange(\"category\")}\n              className=\"\"\n              value={category}\n            />\n          </div>\n\n          \n         \n          {name && imageUrl && publisher && category && author && (\n            <div className=\"addbook__submit\">\n              <button className=\"addbook__submit__btn\" onClick={onSubmit}>\n                Update\n              </button>\n            </div>\n          )}\n        </div>\n      </Base>\n    );\n  };\n\n  if (!success) {\n    return (\n      <div>\n        {errorMessage()}\n        {createBookPortion()}\n      </div>\n    );\n  } else {\n    return <Success />;\n  }\n};\nexport default UpdateBook;\n","/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/components/books/Dashboard/Dashboard.js",[],"/home/rithesh/Rithu/Project/LibraryManagementSystem/backend/frontend/src/shared/Card.js",["115"],"import React from 'react'\nimport './Card.css'\nimport { deleteBook } from '../components/books/helper'\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { isAuthenticated } from '../components/auth';\n\nfunction Card({_id, name, imageUrl, author, publisher, category}) {\n    \n    const {user, token} = isAuthenticated()\n\n    const deleteP = (id) => {\n        if (window.confirm(\"Do you want delete this book\") === true) {\n          deleteBook(token,id,user._id)\n            .then((res) => console.log(res))\n            .catch((err) => console.log(err));\n        }\n      };\n\n    return (\n        <div className=\"card\">\n            <div className=\"card__image\">\n                <img src={imageUrl} alt=\"\" className=\"card__image__pic\"/>\n            </div>\n            <div className=\"card__details\">\n                <p className=\"card__name\">{name}</p>\n                <p className=\"card__author\">-{author}</p>\n                <span className=\"card__category\">{category}</span>\n                <p className=\"card__publishedBy\">Published By: {publisher}</p>\n            <div className=\"card__buttons\">\n                <a href={`/admin/books/edit/${_id}`} className=\"card__buttons__btn\"><EditIcon/></a>\n                <a className=\"card__buttons__btn\" onClick={() => deleteP(_id)} ><DeleteIcon /></a>\n            </div>\n            </div>\n            \n        </div>\n    )\n}\n\nexport default Card\n",{"ruleId":"116","replacedBy":"117"},{"ruleId":"118","replacedBy":"119"},{"ruleId":"120","severity":1,"message":"121","line":3,"column":32,"nodeType":"122","messageId":"123","endLine":3,"endColumn":36},{"ruleId":"124","severity":1,"message":"125","line":48,"column":41,"nodeType":"126","messageId":"127","endLine":48,"endColumn":43},{"ruleId":"128","severity":1,"message":"129","line":51,"column":37,"nodeType":"130","endLine":51,"endColumn":73},{"ruleId":"120","severity":1,"message":"131","line":3,"column":8,"nodeType":"122","messageId":"123","endLine":3,"endColumn":14},{"ruleId":"132","severity":1,"message":"133","line":88,"column":11,"nodeType":"130","endLine":91,"endColumn":13},{"ruleId":"132","severity":1,"message":"133","line":51,"column":11,"nodeType":"130","endLine":51,"endColumn":53},{"ruleId":"120","severity":1,"message":"121","line":7,"column":10,"nodeType":"122","messageId":"123","endLine":7,"endColumn":14},{"ruleId":"120","severity":1,"message":"134","line":7,"column":16,"nodeType":"122","messageId":"123","endLine":7,"endColumn":24},{"ruleId":"120","severity":1,"message":"135","line":12,"column":12,"nodeType":"122","messageId":"123","endLine":12,"endColumn":16},{"ruleId":"120","severity":1,"message":"136","line":15,"column":19,"nodeType":"122","messageId":"123","endLine":15,"endColumn":27},{"ruleId":"124","severity":1,"message":"125","line":32,"column":33,"nodeType":"126","messageId":"127","endLine":32,"endColumn":35},{"ruleId":"137","severity":1,"message":"138","line":44,"column":8,"nodeType":"139","endLine":44,"endColumn":10,"suggestions":"140"},{"ruleId":"128","severity":1,"message":"129","line":95,"column":11,"nodeType":"130","endLine":95,"endColumn":43},{"ruleId":"120","severity":1,"message":"141","line":1,"column":27,"nodeType":"122","messageId":"123","endLine":1,"endColumn":36},{"ruleId":"137","severity":1,"message":"142","line":19,"column":6,"nodeType":"139","endLine":19,"endColumn":8,"suggestions":"143"},{"ruleId":"128","severity":1,"message":"129","line":32,"column":17,"nodeType":"130","endLine":32,"endColumn":81},"no-native-reassign",["144"],"no-negated-in-lhs",["145"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'Footer' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","'Redirect' is defined but never used.","'data' is assigned a value but never used.","'setBooks' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'books' and 'user._id'. Either include them or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setBooks1' needs the current value of 'books'.","ArrayExpression",["146"],"'useEffect' is defined but never used.","React Hook useEffect has a missing dependency: 'match.params.bookId'. Either include it or remove the dependency array.",["147"],"no-global-assign","no-unsafe-negation",{"desc":"148","fix":"149"},{"desc":"150","fix":"151"},"Update the dependencies array to be: [books, user._id]",{"range":"152","text":"153"},"Update the dependencies array to be: [match.params.bookId]",{"range":"154","text":"155"},[1345,1347],"[books, user._id]",[621,623],"[match.params.bookId]"]